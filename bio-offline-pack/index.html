<!DOCTYPE HTML>
<html lang="en">
  
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Limelight|Flamenco|Federo|Yesteryear|Josefin Sans|Spinnaker|Sansita One|Handlee|Droid Sans|Oswald:400,300,700" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/bootstrap-responsive.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/common.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/fontawesome.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/project.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/demo.css" media="screen" rel="stylesheet" type="text/css" />
    <!-- Typekit fonts require an account and a kit containing the fonts used. see https://typekit.com/plans for details. <script type="text/javascript" src="//use.typekit.net/YOUR_KIT_ID.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
-->
    <title>背生物啦，学渣！ Offline</title>
  </head>
  
  <body>
    <div class="container" id="hero-container">
      <div class="navbar" id="nav-bar">
        <div class="navbar-inner">
          <a class="brand" href="#">biotester
            <span class="badge">offline</span>
          </a>
        </div>
      </div>
      <h1 class="heading" id="title">
<p>{葡萄糖}和{果糖}；乳糖水解生成{葡萄糖}和{半乳糖}；麦芽糖水解生成{两份葡萄糖}。</p>
<p>还原糖包括{葡萄糖}、{果糖}、{麦芽糖}、{乳糖}。</p>
      </h1>
      <h2 class="heading" id="subtitle">
        <button id="next" class="btn btn-success">Next</button>
        <button id="disp" class="btn btn-warning">Show Answer</button>
      </h2>
    </div>
  <script src="jquery-1.9.0.min.js"></script>
<script>
$(document).ready(function(){
  t=[];
  var t2=$('p');
  $('p').each(function(i,x){
    if($(x).text().replace(/\s/g,'').length)t.push(x);
  });
  //$('body').text('');
  $('#disp').click(function(){
    $('.mask').css('background','transparent');
    $('.mask').css('color','#000');
  });
  $('#next').click(function(){
    myR();myF();
  });
});

function ranInt(len){return Math.floor(Math.random()*len);}
function maskHowMany(len)
{
if(len==1)return 0;
if(len<=3)return 1;
return (len/2)|0;
}

function myF()
{
var i;
for(i=0;i<100+ranInt(50);i++)Math.random();

var n=ranInt(t.length);
var elem=t[n];
console.log(elem)
var text=$(elem).text();
console.log(text);
var arr=text.match(/\{.*?}/g);
var arr2=[];
//for(i=0;i<arr.length;i++)
for(i in arr)
if(arr[i])
arr2.push(arr[i]);

var arr3=[];
for(i in arr2)arr3[i]=ranInt(10000)*2;
var arrl=maskHowMany(arr2.length);
for(i=0;i<arrl;i++)arr3[i]+=1;
console.log(arr3);
arr3.sort(function(a,b){return a-b;});
for(i in arr3)arr3[i]=arr3[i]%2;
console.log(arr3);

var arr4=[];

var elem=document.createElement('span');
console.log(text);
text=text.replace(/{([^}]*)}/g,'<span class="mask" style="background-color: black; background-position: initial initial; background-repeat: initial initial;">$1</span>');
console.log(text);
var text='<span id="question">' + text + '</span>';
console.log(text);
document.getElementById('title').innerHTML=text;
$('.mask').css('background','black');
$('.mask').hover(
  function(){
    $(this).css('background','transparent');
  },
  function(){
    $(this).css('background','black');
  }
);

return arr4;
}

function myR()
{
  $('#question').remove();
  $('p').remove();
}

$(document).ready(myF);
</script>
  </body>
</html>